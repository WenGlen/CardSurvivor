---

## . 技能卡片全書

### 4.1 冰錐（Ice Shard）

**核心機制**：直線發射，有機率貫穿敵人

**可用參數**：
- `damage`（傷害）
- `speed`（飛行速度）
- `cooldown`（冷卻時間）
- `pierceCount`（穿透次數）
- `chance`（貫穿機率）
- `spreadAngle`（散射角度）
- `count`（數量）

**不可用參數**：
- `duration`（冰錐是瞬時攻擊，不持續）
- `radius`（冰錐是點攻擊）
- `range`（冰錐射程由速度決定）
- `angle`（冰錐是直線，用 spreadAngle 控制散射）

**初始數值**：
- 傷害：15
- 速度：200 像素/秒
- 冷卻：1.5 秒
- 數量：1
- 穿透：0
- 貫穿機率：0%
- 標籤：冰系


**卡片列表**：

1. **冰錐數量 +1**（順序依賴）
   - 效果：新增一顆初始數值的冰錐
   - 說明：根據當前快照複製，只會複製「那一刻」的狀態

2. **冰錐傷害 +10**（順序依賴）
   - 效果：所有現有冰錐的傷害 +10
   - 說明：只作用於當前存在的冰錐

3. **冰錐傷害共 +50（均分）**（順序依賴）
   - 效果：所有子彈增加共 50 點傷害，但傷害會均分在所有子彈上
   - 說明：如果先放這張卡，再放數量卡，總傷害會均分到更多子彈上

4. **冰錐穿透 +1**（順序依賴）
   - 效果：所有現有冰錐的穿透次數 +1

5. **冰錐速度 +50**（順序依賴）
   - 效果：所有現有冰錐的飛行速度 +50

6. **冰錐散射角度 +15°**（順序依賴）
   - 效果：所有現有冰錐的散射角度 +15°

7. **冰錐冷卻 -0.2 秒**（順序依賴）
   - 效果：冰錐的冷卻時間 -0.2 秒

8. **所有冰錐附加緩速效果**（金卡）
   - 效果：所有冰錐附加緩速效果，包含未來疊加的卡片
   - 說明：無論何時放入，所有冰錐都會獲得緩速效果

9. **所有冰錐附加冰凍機率 10%**（金卡）
   - 效果：所有冰錐有 10% 機率冰凍敵人，包含未來疊加的卡片

**策略玩法**：
- 先疊穿透再疊數量：每發都能穿透多個敵人
- 先疊數量再疊穿透：只有第一發能穿透，後續發射的冰錐無法穿透
- 先疊傷害再疊數量：主彈傷害高，副彈傷害低
- 先疊數量再疊傷害：所有冰錐平均獲得傷害加成

---

### 4.2 電球（Lightning Orb）

**核心機制**：繞身旋轉，持續觸碰傷害

**可用參數**：
- `damage`（傷害）
- `speed`（旋轉速度）
- `radius`（旋轉半徑）
- `duration`（持續時間）
- `count`（數量）
- `cooldown`（冷卻時間，用於生成新電球）

**不可用參數**：
- `range`（電球是環繞技能，沒有射程概念）
- `pierceCount`（電球是持續觸碰，不是穿透）
- `spreadAngle`（電球是環繞，不需要散射）
- `angle`（電球是 360 度環繞）

**初始數值**：
- 傷害：20（每次觸碰）
- 速度：180 度/秒
- 半徑：80 像素
- 持續時間：永久（直到被移除）
- 數量：1
- 冷卻：0 秒（持續發動）

**卡片列表**：

1. **電球數量 +1**（順序依賴）
   - 效果：新增一顆初始數值的電球
   - 說明：根據當前快照複製，只會複製「那一刻」的狀態

2. **電球傷害 +10**（順序依賴）
   - 效果：所有現有電球的傷害 +10

3. **電球傷害共 +50（均分）**（順序依賴）
   - 效果：所有電球增加共 50 點傷害，但傷害會均分在所有電球上

4. **電球速度 +30**（順序依賴）
   - 效果：所有現有電球的旋轉速度 +30 度/秒

5. **電球半徑 +20**（順序依賴）
   - 效果：所有現有電球的旋轉半徑 +20 像素

6. **電球傷害 +20%**（順序依賴）
   - 效果：所有現有電球的傷害 ×1.2

7. **所有電球附加感電效果**（金卡）
   - 效果：所有電球附加感電效果，包含未來疊加的卡片
   - 說明：感電效果會讓敵人受到額外傷害

8. **所有電球附加連鎖效果**（金卡）
   - 效果：所有電球觸碰敵人時有 30% 機率觸發連鎖閃電，包含未來疊加的卡片

**策略玩法**：
- 先疊速度再疊數量：所有球同步高速旋轉，形成密集防禦網
- 後疊數量：形成內外圈不同速的「防禦網」，外圈快內圈慢
- 先疊半徑再疊數量：外圈大球 + 內圈小球，形成多層防禦
- 先疊傷害再疊數量：主球傷害高，副球傷害低，適合集中火力

---

### 4.3 光束（Beam）

**核心機制**：鎖定最近敵人持續照射

**可用參數**：
- `damage`（每秒傷害）
- `range`（射程）
- `radius`（光束寬度）
- `duration`（持續時間）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `speed`（光束是瞬時鎖定，不需要速度）
- `pierceCount`（光束是持續照射，不是穿透）
- `spreadAngle`（光束是單一方向）
- `angle`（光束是鎖定目標，不需要角度）

**初始數值**：
- 傷害：30/秒
- 射程：400 像素
- 寬度：20 像素
- 持續時間：2 秒
- 數量：1
- 冷卻：3 秒

**卡片列表**：

1. **光束數量 +1**（順序依賴）
   - 效果：新增一道初始數值的光束

2. **光束傷害 +15**（順序依賴）
   - 效果：所有現有光束的每秒傷害 +15

3. **光束寬度 +10**（順序依賴）
   - 效果：所有現有光束的寬度 +10 像素

4. **光束射程 +100**（順序依賴）
   - 效果：所有現有光束的射程 +100 像素

5. **光束持續時間 +1 秒**（順序依賴）
   - 效果：所有現有光束的持續時間 +1 秒

6. **光束冷卻 -0.5 秒**（順序依賴）
   - 效果：光束的冷卻時間 -0.5 秒

7. **所有光束附加穿透效果**（金卡）
   - 效果：所有光束可以穿透敵人，包含未來疊加的卡片

8. **所有光束附加燃燒效果**（金卡）
   - 效果：所有光束附加燃燒效果，包含未來疊加的卡片

**策略玩法**：
- 先疊寬度：產生粗大的主光束，傷害範圍大
- 後疊數量：主光束粗，副光束細，適合掃蕩殘血
- 先疊數量再疊寬度：所有光束都變粗，形成多道粗光束

---

### 4.4 火焰（Flame）

**核心機制**：扇形噴射，附帶灼燒

**可用參數**：
- `damage`（傷害）
- `angle`（扇形角度）
- `range`（噴射距離）
- `duration`（持續時間，火焰燃燒時間）
- `cooldown`（冷卻時間）
- `slowRate`（減速效果，火焰的熱浪效果）

**不可用參數**：
- `count`（火焰是扇形範圍攻擊，不是多發子彈）
- `speed`（火焰是瞬時噴射）
- `pierceCount`（火焰是範圍傷害）
- `spreadAngle`（火焰本身就是扇形，用 angle 控制）

**初始數值**：
- 傷害：25
- 角度：60°
- 距離：200 像素
- 持續時間：1 秒（燃燒時間）
- 冷卻：2 秒

**卡片列表**：

1. **火焰角度 +20°**（順序依賴）
   - 效果：所有現有火焰的扇形角度 +20°

2. **火焰傷害 +15**（順序依賴）
   - 效果：所有現有火焰的傷害 +15

3. **火焰距離 +50**（順序依賴）
   - 效果：所有現有火焰的噴射距離 +50 像素

4. **火焰持續時間 +0.5 秒**（順序依賴）
   - 效果：所有現有火焰的燃燒時間 +0.5 秒

5. **火焰冷卻 -0.3 秒**（順序依賴）
   - 效果：火焰的冷卻時間 -0.3 秒

6. **火焰傷害 +25%**（順序依賴）
   - 效果：所有現有火焰的傷害 ×1.25

7. **所有火焰附加灼燒效果**（金卡）
   - 效果：所有火焰附加灼燒效果（持續傷害），包含未來疊加的卡片

8. **所有火焰附加擊退效果**（金卡）
   - 效果：所有火焰附加擊退效果，包含未來疊加的卡片

**策略玩法**：
- 先疊角度：噴射範圍變大，覆蓋更多敵人
- 先疊距離：遠程噴射，安全輸出
- 先疊傷害再疊角度：大範圍高傷害火焰

---

### 4.5 毒霧（Poison Mist）

**核心機制**：腳下生成持續傷害區域

**可用參數**：
- `damage`（每秒傷害）
- `radius`（範圍半徑）
- `slowRate`（減速比例）
- `duration`（持續時間）
- `tickRate`（觸發頻率）
- `count`（數量）

**不可用參數**：
- `cooldown`（毒霧預設持續發動，沒有冷卻時間）
- `speed`（毒霧是固定區域）
- `range`（毒霧在腳下生成）
- `angle`（毒霧是圓形區域）

**初始數值**：
- 傷害：10/秒
- 半徑：100 像素
- 減速：20%
- 持續時間：永久（直到被移除）
- 觸發頻率：1 次/秒
- 數量：1

**卡片列表**：

1. **毒霧數量 +1**（順序依賴）
   - 效果：新增一個初始數值的毒霧區域

2. **毒霧範圍 +30**（順序依賴）
   - 效果：所有現有毒霧的範圍半徑 +30 像素

3. **毒霧傷害 +5**（順序依賴）
   - 效果：所有現有毒霧的每秒傷害 +5

4. **毒霧減速 +10%**（順序依賴）
   - 效果：所有現有毒霧的減速比例 +10%

5. **毒霧觸發頻率 +0.5**（順序依賴）
   - 效果：所有現有毒霧的觸發頻率 +0.5 次/秒

6. **毒霧傷害 +30%**（順序依賴）
   - 效果：所有現有毒霧的傷害 ×1.3

7. **所有毒霧附加劇毒效果**（金卡）
   - 效果：所有毒霧附加劇毒效果（傷害隨時間遞增），包含未來疊加的卡片

8. **所有毒霧附加腐蝕效果**（金卡）
   - 效果：所有毒霧附加腐蝕效果（降低敵人防禦），包含未來疊加的卡片

**策略玩法**：
- 先疊範圍再疊數量：雙重超大毒區，覆蓋範圍極大
- 先疊數量再疊範圍：一個大毒區配上幾個小傷害區，形成多層防禦
- 先疊傷害再疊數量：主毒區傷害高，副毒區傷害低

---

### 4.6 衝撞（Dash）

**核心機制**：向搖桿方向衝刺

**可用參數**：
- `damage`（衝撞傷害）
- `dashDistance`（衝刺距離）
- `invincibleTime`（無敵時間）
- `cooldown`（冷卻時間）
- `count`（數量，連續衝撞）

**不可用參數**：
- `duration`（衝撞是瞬時位移）
- `radius`（衝撞是線性位移）
- `range`（用 dashDistance 控制）
- `angle`（衝撞方向由搖桿決定）

**初始數值**：
- 傷害：40
- 距離：150 像素
- 無敵時間：0.3 秒
- 數量：1
- 冷卻：4 秒

**卡片列表**：

1. **衝撞數量 +1**（順序依賴）
   - 效果：新增一次初始數值的衝撞

2. **衝撞傷害 +20**（順序依賴）
   - 效果：所有現有衝撞的傷害 +20

3. **衝撞距離 +50**（順序依賴）
   - 效果：所有現有衝撞的距離 +50 像素

4. **衝撞無敵時間 +0.2 秒**（順序依賴）
   - 效果：所有現有衝撞的無敵時間 +0.2 秒

5. **衝撞冷卻 -0.5 秒**（順序依賴）
   - 效果：衝撞的冷卻時間 -0.5 秒

6. **所有衝撞附加擊退效果**（金卡）
   - 效果：所有衝撞附加擊退效果，包含未來疊加的卡片

7. **所有衝撞附加燃燒路徑**（金卡）
   - 效果：所有衝撞在路徑上留下火焰，包含未來疊加的卡片

**策略玩法**：
- 先疊距離：長程衝撞，快速位移
- 後疊數量：連段衝撞，但第二次之後的衝撞傷害較低
- 先疊傷害再疊數量：主衝撞傷害高，副衝撞傷害低

---

### 4.7 風刃（Wind Blade）

**核心機制**：擊退敵人，傷害隨距離衰減

**可用參數**：
- `damage`（基礎傷害）
- `speed`（飛行速度）
- `angle`（扇形角度）
- `knockback`（擊退距離）
- `falloffRatio`（隨距離衰減率）
- `range`（最大射程）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `duration`（風刃是瞬時攻擊）
- `radius`（風刃是線性攻擊）
- `pierceCount`（風刃是單次攻擊）

**初始數值**：
- 傷害：35
- 速度：250 像素/秒
- 角度：45°
- 擊退：100 像素
- 衰減率：0.5（每 100 像素傷害減半）
- 射程：500 像素
- 數量：1
- 冷卻：3 秒

**卡片列表**：

1. **風刃數量 +1**（順序依賴）
   - 效果：新增一道初始數值的風刃

2. **風刃傷害 +15**（順序依賴）
   - 效果：所有現有風刃的傷害 +15

3. **風刃擊退 +50**（順序依賴）
   - 效果：所有現有風刃的擊退距離 +50 像素

4. **風刃角度 +15°**（順序依賴）
   - 效果：所有現有風刃的扇形角度 +15°

5. **風刃衰減率 -0.1**（順序依賴）
   - 效果：所有現有風刃的衰減率 -0.1（傷害衰減更少）

6. **風刃射程 +100**（順序依賴）
   - 效果：所有現有風刃的射程 +100 像素

7. **所有風刃附加切割效果**（金卡）
   - 效果：所有風刃附加切割效果（無視部分防禦），包含未來疊加的卡片

8. **所有風刃附加旋風效果**（金卡）
   - 效果：所有風刃附加旋風效果（持續擊退），包含未來疊加的卡片

**策略玩法**：
- 先疊擊退：保命神技，推開敵人
- 先疊數量：只有第一發能推開怪，後面是純補傷害
- 先疊衰減率再疊數量：所有風刃都能遠程高傷害

---

### 4.8 水球（Water Ball）

**核心機制**：囚禁複數敵人至死

**可用參數**：
- `damage`（每秒傷害）
- `captureLimit`（囚禁數量上限）
- `duration`（持續時間）
- `radius`（水球大小）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `speed`（水球是定點技能）
- `range`（水球在指定位置生成）
- `angle`（水球是球形）
- `pierceCount`（水球是囚禁，不是穿透）

**初始數值**：
- 傷害：15/秒
- 囚禁上限：2
- 持續時間：5 秒
- 半徑：60 像素
- 數量：1
- 冷卻：6 秒

**卡片列表**：

1. **水球數量 +1**（順序依賴）
   - 效果：新增一個初始數值的水球

2. **水球容量 +1**（順序依賴）
   - 效果：所有現有水球的囚禁數量上限 +1

3. **水球傷害 +10**（順序依賴）
   - 效果：所有現有水球的每秒傷害 +10

4. **水球持續時間 +2 秒**（順序依賴）
   - 效果：所有現有水球的持續時間 +2 秒

5. **水球半徑 +20**（順序依賴）
   - 效果：所有現有水球的半徑 +20 像素

6. **所有水球附加窒息效果**（金卡）
   - 效果：所有水球附加窒息效果（傷害隨時間遞增），包含未來疊加的卡片

7. **所有水球附加冰凍效果**（金卡）
   - 效果：所有水球附加冰凍效果（降低敵人移動速度），包含未來疊加的卡片

**策略玩法**：
- 先疊容量：一次關住一群精英怪
- 後疊數量：主球關大怪，副球關雜魚
- 先疊傷害再疊容量：高傷害大容量水球

---

### 4.9 崩落（Collapse）

**核心機制**：定點造成敵方卡死

**可用參數**：
- `damage`（傷害）
- `castRange`（施法距離）
- `radius`（陷阱範圍）
- `trapDuration`（陷阱持續時間）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `speed`（崩落是定點技能）
- `duration`（用 trapDuration 控制）
- `angle`（崩落是圓形區域）
- `pierceCount`（崩落是區域傷害）

**初始數值**：
- 傷害：50
- 施法距離：300 像素
- 陷阱範圍：80 像素
- 持續時間：3 秒
- 數量：1
- 冷卻：5 秒

**卡片列表**：

1. **崩落數量 +1**（順序依賴）
   - 效果：新增一個初始數值的崩落陷阱

2. **崩落施法距離 +100**（順序依賴）
   - 效果：所有現有崩落的施法距離 +100 像素

3. **崩落範圍 +30**（順序依賴）
   - 效果：所有現有崩落的陷阱範圍 +30 像素

4. **崩落傷害 +25**（順序依賴）
   - 效果：所有現有崩落的傷害 +25

5. **崩落持續時間 +1 秒**（順序依賴）
   - 效果：所有現有崩落的持續時間 +1 秒

6. **所有崩落附加震盪效果**（金卡）
   - 效果：所有崩落附加震盪效果（擊退周圍敵人），包含未來疊加的卡片

7. **所有崩落附加地刺效果**（金卡）
   - 效果：所有崩落附加地刺效果（持續傷害），包含未來疊加的卡片

**策略玩法**：
- 先疊施法距離：遠程控制，安全放置陷阱
- 後疊數量：能在腳下補放一個保命小陷阱
- 先疊範圍再疊數量：大範圍主陷阱 + 小範圍副陷阱

---

### 4.10 詛咒（Curse）

**核心機制**：極低機率直接斬殺

**可用參數**：
- `killChance`（斬殺機率）
- `cooldown`（冷卻時間）
- `targetCount`（目標數量）
- `count`（數量）

**不可用參數**：
- `damage`（詛咒是即死，不是傷害）
- `speed`（詛咒是瞬時效果）
- `range`（詛咒是鎖定目標）
- `duration`（詛咒是瞬時效果）

**初始數值**：
- 斬殺機率：5%
- 目標數量：1
- 數量：1
- 冷卻：10 秒

**卡片列表**：

1. **詛咒數量 +1**（順序依賴）
   - 效果：新增一次初始數值的詛咒

2. **詛咒機率 +5%**（順序依賴）
   - 效果：所有現有詛咒的斬殺機率 +5%

3. **詛咒目標數 +1**（順序依賴）
   - 效果：所有現有詛咒的目標數量 +1

4. **詛咒冷卻 -1 秒**（順序依賴）
   - 效果：詛咒的冷卻時間 -1 秒

5. **所有詛咒附加虛弱效果**（金卡）
   - 效果：所有詛咒附加虛弱效果（即使未斬殺也降低敵人屬性），包含未來疊加的卡片

6. **所有詛咒附加連鎖效果**（金卡）
   - 效果：所有詛咒附加連鎖效果（斬殺後有機率觸發下一次詛咒），包含未來疊加的卡片

**策略玩法**：
- 先疊機率：針對 BOSS，提高斬殺成功率
- 先疊數量：多發小機率，拼「抽獎」次數
- 先疊目標數再疊機率：多目標高機率詛咒

---

### 4.11 魅惑（Charm）

**核心機制**：轉換敵方陣營

**可用參數**：
- `charmDuration`（魅惑持續時間）
- `atkBuff`（被魅惑怪的攻擊加成）
- `chance`（魅惑成功率）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `damage`（魅惑是控制，不是傷害）
- `speed`（魅惑是瞬時效果）
- `range`（魅惑是鎖定目標）
- `radius`（魅惑是單體技能）

**初始數值**：
- 持續時間：10 秒
- 攻擊加成：50%
- 成功率：30%
- 數量：1
- 冷卻：8 秒

**卡片列表**：

1. **魅惑數量 +1**（順序依賴）
   - 效果：新增一次初始數值的魅惑

2. **魅惑持續時間 +5 秒**（順序依賴）
   - 效果：所有現有魅惑的持續時間 +5 秒

3. **魅惑攻擊加成 +25%**（順序依賴）
   - 效果：所有現有魅惑的攻擊加成 +25%

4. **魅惑成功率 +10%**（順序依賴）
   - 效果：所有現有魅惑的成功率 +10%

5. **所有魅惑附加忠誠效果**（金卡）
   - 效果：所有魅惑附加忠誠效果（被魅惑怪不會攻擊玩家），包含未來疊加的卡片

6. **所有魅惑附加強化效果**（金卡）
   - 效果：所有魅惑附加強化效果（被魅惑怪獲得額外生命值），包含未來疊加的卡片

**策略玩法**：
- 先疊 Buff：魅惑一隻變超強戰友，但持續時間短
- 先疊數量：組建一支弱小的傀儡軍團，但攻擊力低
- 先疊成功率再疊數量：高成功率多目標魅惑

---

### 4.12 黑洞（Black Hole）

**核心機制**：強力吸引中心點

**可用參數**：
- `damage`（每秒傷害）
- `pullForce`（吸引力強度）
- `radius`（作用範圍）
- `duration`（持續時間）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `speed`（黑洞是定點技能）
- `range`（黑洞在指定位置生成）
- `angle`（黑洞是圓形區域）
- `pierceCount`（黑洞是區域效果）

**初始數值**：
- 傷害：20/秒
- 吸引力：100
- 範圍：150 像素
- 持續時間：5 秒
- 數量：1
- 冷卻：12 秒

**卡片列表**：

1. **黑洞數量 +1**（順序依賴）
   - 效果：新增一個初始數值的黑洞

2. **黑洞吸力 +50**（順序依賴）
   - 效果：所有現有黑洞的吸引力 +50

3. **黑洞範圍 +50**（順序依賴）
   - 效果：所有現有黑洞的作用範圍 +50 像素

4. **黑洞傷害 +15**（順序依賴）
   - 效果：所有現有黑洞的每秒傷害 +15

5. **黑洞持續時間 +2 秒**（順序依賴）
   - 效果：所有現有黑洞的持續時間 +2 秒

6. **所有黑洞附加撕裂效果**（金卡）
   - 效果：所有黑洞附加撕裂效果（敵人被吸引時受到額外傷害），包含未來疊加的卡片

7. **所有黑洞附加爆炸效果**（金卡）
   - 效果：所有黑洞附加爆炸效果（消失時造成範圍傷害），包含未來疊加的卡片

**策略玩法**：
- 先疊吸力：瞬間聚怪，快速清理
- 先疊數量：大黑洞吸怪，小黑洞在旁持續干擾
- 先疊範圍再疊數量：超大範圍主黑洞 + 小範圍副黑洞

---

### 4.13 連鎖閃電（Chain Lightning）

**核心機制**：敵人跳躍式傷害

**可用參數**：
- `damage`（基礎傷害）
- `chainCount`（連鎖跳躍次數）
- `range`（跳躍範圍）
- `falloffRatio`（每次跳躍傷害衰減率）
- `cooldown`（冷卻時間）
- `count`（數量）

**不可用參數**：
- `speed`（連鎖閃電是瞬時跳躍）
- `duration`（連鎖閃電是瞬時效果）
- `radius`（連鎖閃電是點對點跳躍）
- `angle`（連鎖閃電是自動鎖定）

**初始數值**：
- 傷害：40
- 跳躍次數：3
- 跳躍範圍：200 像素
- 衰減率：0.7（每次跳躍傷害減少 30%）
- 數量：1
- 冷卻：4 秒

**卡片列表**：

1. **連鎖閃電數量 +1**（順序依賴）
   - 效果：新增一次初始數值的連鎖閃電

2. **連鎖閃電跳躍 +1**（順序依賴）
   - 效果：所有現有連鎖閃電的跳躍次數 +1

3. **連鎖閃電傷害 +20**（順序依賴）
   - 效果：所有現有連鎖閃電的基礎傷害 +20

4. **連鎖閃電範圍 +50**（順序依賴）
   - 效果：所有現有連鎖閃電的跳躍範圍 +50 像素

5. **連鎖閃電衰減率 -0.1**（順序依賴）
   - 效果：所有現有連鎖閃電的衰減率 -0.1（傷害衰減更少）

6. **所有連鎖閃電附加感電效果**（金卡）
   - 效果：所有連鎖閃電附加感電效果（敵人受到額外傷害），包含未來疊加的卡片

7. **所有連鎖閃電附加擴散效果**（金卡）
   - 效果：所有連鎖閃電附加擴散效果（跳躍時有機率產生額外跳躍），包含未來疊加的卡片

**策略玩法**：
- 先疊跳躍：清理大群怪，跳躍次數多
- 先疊數量：第一發跳得遠，後續發射的只會電附近的怪
- 先疊衰減率再疊跳躍：高傷害多跳躍連鎖閃電

---

## 5. TypeScript 資料結構設計

### 5.1 核心介面定義

```typescript
// 技能類型
type SkillType = 
  | 'ICE_SHARD'      // 冰錐
  | 'LIGHTNING_ORB'  // 電球
  | 'BEAM'           // 光束
  | 'FLAME'          // 火焰
  | 'POISON_MIST'    // 毒霧
  | 'DASH'           // 衝撞
  | 'WIND_BLADE'     // 風刃
  | 'WATER_BALL'     // 水球
  | 'COLLAPSE'       // 崩落
  | 'CURSE'          // 詛咒
  | 'CHARM'          // 魅惑
  | 'BLACK_HOLE'     // 黑洞
  | 'CHAIN_LIGHTNING'; // 連鎖閃電

// 技能屬性統計（動態屬性，根據技能類型使用不同參數）
interface SkillStats {
  // 基礎物理參數
  damage?: number;
  cooldown?: number;
  duration?: number;
  speed?: number;
  radius?: number;
  range?: number;
  angle?: number;
  
  // 行為參數
  count?: number;
  pierceCount?: number;
  bounceCount?: number;
  splitCount?: number;
  spreadAngle?: number;
  knockback?: number;
  chance?: number;
  slowRate?: number;
  captureLimit?: number;
  chainCount?: number;
  pullForce?: number;
  tickRate?: number;
  falloffRatio?: number;
  invincibleTime?: number;
  castRange?: number;
  dashDistance?: number;
  killChance?: number;
  targetCount?: number;
  charmDuration?: number;
  atkBuff?: number;
  trapDuration?: number;
  
  // 特殊參數（依技能而定）
  [key: string]: number | undefined;
}

// 卡片效果的操作類型
type ModifierOp = 
  | 'MULTIPLY'      // 乘法（例如：傷害 ×1.2）
  | 'ADD'           // 加法（例如：傷害 +10）
  | 'SET'           // 設定（例如：設定傷害為 50）
  | 'SPAWN_COPY'    // 衍生複製（例如：數量 +1）
  | 'DISTRIBUTE'    // 均分（例如：傷害共 +50，均分到所有子彈）
  | 'GLOBAL_BUFF';  // 全局效果（金卡）

// 卡片效果定義
interface CardEffect {
  property: keyof SkillStats; // 要修改哪一個參數
  operation: ModifierOp;       // 操作類型
  value: number;               // 操作數值
  isGlobal?: boolean;          // 是否為全局效果（金卡）
}

// 元素標籤
type ElementTag = 'ICE' | 'LIGHTNING' | 'FIRE' | 'BEAM' | 'POISON' | 'PHYSICAL';

// 卡片定義
interface Card {
  id: string;
  name: string;
  skillType: SkillType;        // 所屬技能類型
  isGolden?: boolean;          // 是否為金卡
  level: number;              // 卡片等級
  effects: CardEffect[];      // 效果列表
  description: string;        // 卡片描述
}

// 技能實例（卡槽中的技能）
interface SkillInstance {
  id: string;
  slotId: string;             // 所屬卡槽 ID
  skillType: SkillType;        // 技能類型
  cards: Card[];              // 卡片序列（第一張是初始卡）
  currentState: SkillStats;    // 當前屬性快照
  instances: SkillStats[];    // 最終生成的各個子體數據快照
  globalEffects: CardEffect[]; // 全局效果列表（金卡）
}

// 卡槽定義
interface CardSlot {
  id: string;
  skillType: SkillType | null; // 技能類型（null 表示空槽）
  cards: Card[];               // 卡片序列
}
```

### 5.2 技能演化邏輯實作範例

```typescript
class ActiveSkill {
  private skillType: SkillType;
  private baseStats: SkillStats;      // 初始數值（根據技能類型定義）
  private currentState: SkillStats;   // 當前屬性快照
  private instances: SkillStats[];    // 每一顆子彈/物件的獨立數值快照
  private globalEffects: CardEffect[]; // 全局效果列表（金卡）
  
  constructor(skillType: SkillType) {
    this.skillType = skillType;
    this.baseStats = this.initializeBaseStats(skillType);
    this.currentState = { ...this.baseStats };
    this.instances = [{ ...this.currentState }]; // 初始母體
    this.globalEffects = [];
  }
  
  // 應用卡片效果
  applyCard(card: Card): void {
    if (card.skillType !== this.skillType) {
      throw new Error(`Card type ${card.skillType} does not match skill type ${this.skillType}`);
    }
    
    // 處理每種效果
    for (const effect of card.effects) {
      if (effect.isGlobal || card.isGolden) {
        // 全局效果（金卡）：不修改快照，只加入全局效果列表
        this.globalEffects.push(effect);
        // 應用到所有現有實例
        this.applyGlobalEffectToAllInstances(effect);
      } else {
        // 順序依賴效果：修改快照
        this.applySequentialEffect(effect);
      }
    }
  }
  
  // 應用順序依賴效果
  private applySequentialEffect(effect: CardEffect): void {
    const { property, operation, value } = effect;
    
    if (operation === 'SPAWN_COPY') {
      // 衍生修正：根據當前快照複製
      const snapshot = { ...this.currentState };
      // 應用所有全局效果到新實例
      for (const globalEffect of this.globalEffects) {
        this.applyEffectToInstance(snapshot, globalEffect);
      }
      this.instances.push(snapshot);
      // 如果 effect.value > 1，可以產生多個副本
      for (let i = 1; i < value; i++) {
        const copy = { ...snapshot };
        this.instances.push(copy);
      }
    } else if (operation === 'DISTRIBUTE') {
      // 均分效果：將總值均分到所有現有實例
      const totalValue = value;
      const instanceCount = this.instances.length;
      const valuePerInstance = totalValue / instanceCount;
      
      // 只修改母體和當前快照（因為這是順序依賴的）
      if (this.currentState[property] !== undefined) {
        this.currentState[property] = (this.currentState[property] || 0) + valuePerInstance;
        this.instances[0][property] = (this.instances[0][property] || 0) + valuePerInstance;
      }
    } else {
      // 屬性修正：只修改母體（instances[0]）和當前快照
      switch (operation) {
        case 'MULTIPLY':
          if (this.currentState[property] !== undefined) {
            this.currentState[property] = (this.currentState[property] || 1) * value;
            this.instances[0][property] = (this.instances[0][property] || 1) * value;
          }
          break;
        case 'ADD':
          if (this.currentState[property] !== undefined) {
            this.currentState[property] = (this.currentState[property] || 0) + value;
            this.instances[0][property] = (this.instances[0][property] || 0) + value;
          }
          break;
        case 'SET':
          this.currentState[property] = value;
          this.instances[0][property] = value;
          break;
      }
    }
  }
  
  // 應用全局效果到所有實例
  private applyGlobalEffectToAllInstances(effect: CardEffect): void {
    for (const instance of this.instances) {
      this.applyEffectToInstance(instance, effect);
    }
  }
  
  // 應用效果到單一實例
  private applyEffectToInstance(instance: SkillStats, effect: CardEffect): void {
    const { property, operation, value } = effect;
    
    if (instance[property] === undefined) return;
    
    switch (operation) {
      case 'MULTIPLY':
        instance[property] = (instance[property] || 1) * value;
        break;
      case 'ADD':
        instance[property] = (instance[property] || 0) + value;
        break;
      case 'SET':
        instance[property] = value;
        break;
      case 'GLOBAL_BUFF':
        // 全局 Buff 的具體實作（例如：附加狀態效果）
        // 這裡可以擴充狀態效果系統
        break;
    }
  }
  
  // 初始化基礎屬性（根據技能類型）
  private initializeBaseStats(skillType: SkillType): SkillStats {
    // 根據技能類型返回初始數值
    // 這裡應該從配置檔讀取，以下是範例
    const baseStatsMap: Record<SkillType, SkillStats> = {
      'ICE_SHARD': {
        damage: 15,
        speed: 200,
        cooldown: 1.5,
        count: 1,
        pierceCount: 0,
        chance: 0,
        spreadAngle: 0,
      },
      'LIGHTNING_ORB': {
        damage: 20,
        speed: 180,
        radius: 80,
        duration: -1, // -1 表示永久
        count: 1,
        cooldown: 0,
      },
      // ... 其他技能類型的初始數值
    };
    
    return baseStatsMap[skillType] || {};
  }
  
  // 獲取所有實例的快照
  getInstances(): SkillStats[] {
    return this.instances;
  }
  
  // 獲取當前狀態（用於預覽）
  getCurrentState(): SkillStats {
    return { ...this.currentState };
  }
  
  // 獲取全局效果列表
  getGlobalEffects(): CardEffect[] {
    return [...this.globalEffects];
  }
}
```

### 5.3 三層數據傳遞架構

為了讓開發者能夠理解這套複雜的系統，開發時需區分三種數據流：

1. **藍圖數據（Blueprint）**：卡片的原始定義（JSON 配置檔）
2. **演化數據（Evolution）**：玩家在卡槽中排列的「卡片序列」
3. **運行實例（Runtime Instance）**：戰鬥中根據演化數據生成的 `GameObject`

---

## 6. 平衡性考量

### 6.1 資源消耗限制（Energy Cost）

- 卡片堆疊順序不僅影響效果，還會影響**冷卻時間（CD）**
- **公式建議**：每一張後置卡片都會額外增加該技能的總冷卻時間
- 這會逼玩家思考：是要一個「超強但 10 秒發一次」的技能，還是「三個普通但連發」的技能

### 6.2 邊際效益遞減

- 對於 `Speed` 或 `Radius` 等物理參數，設定**硬上限（Hard Cap）**
- 例如：電球旋轉速度最快不能超過某個值，否則會造成碰撞偵測失效
- 例如：傷害加成可能有軟上限，超過後收益遞減

### 6.3 關卡屬性剋制

- **毒霧** 對建築物或機械怪無效
- **魅惑** 對精英怪機率減半
- **冰錐** 在「極寒關卡」傷害加倍，但在「岩漿關卡」會快速消融（距離縮短）

### 6.4 局內成長平衡

- **等級與臨時卡**：擊殺怪物獲得經驗。升級時，玩家從隨機三張卡中選一
- **位置權重**：玩家必須決定將這張卡「插入」哪一個技能槽位的末端
- **冷卻平衡**：每疊加一張卡，該技能的冷卻時間會微幅增加，防止單一技能無限膨脹

### 6.5 金卡平衡

- **金卡稀有度**：金卡應該比普通卡更稀有，獲得機率較低
- **金卡效果強度**：金卡的效果應該強大但不會過於破壞平衡
- **金卡策略價值**：金卡提供「不受順序影響」的穩定加成，適合在任意時機放入

---

## 7. 開發實作指南

### 7.1 卡片序列演化邏輯實作步驟

1. **初始化技能**：玩家放入第一張卡片，開啟該技能類型，建立初始 `CurrentState`
2. **依序處理卡片**：由左至右逐一讀取卡片
3. **判斷效果類型**：
   - 順序依賴效果 → 修改 `CurrentState` 和 `instances[0]`，或複製快照
   - 全局效果（金卡）→ 加入 `globalEffects` 列表，應用到所有實例
4. **生成運行實例**：根據 `instances` 陣列中的每個快照，生成對應的遊戲物件，並應用所有全局效果

### 7.2 手機端適配（Mobile UX）

- **操作方案**：左手虛擬搖桿（Joystick）負責移動
- **自動鎖定**：技能優先朝最近敵人發射（部分技能如「崩落」可透過長按拖曳指定位置）
- **UI 佈局**：卡片序列採橫向排列，點擊可即時查看該序列產生的「最終預期傷害」
- **金卡標記**：金卡在 UI 上應該有明顯的視覺區別（金色邊框、圖標等）

### 7.3 局外成長與提取機制

- **提取機制**：通關後，玩家可以從該局使用的「臨時卡片」中**挑選一張**永久保留
- **戰前配置**：進入關卡前，玩家可從永久倉庫中挑選卡片填滿 3 個初始槽位（每個槽位第一張卡片決定技能類型）

---

## 8. 總結

本文件定義了 Survivor-X 遊戲的核心卡片堆疊系統，採用「順序依賴堆疊」機制，透過快照系統實現「後面的卡片不套用前面效果」的設計目標。這套系統將卡片組合從單純的數值遊戲轉變為「技能邏輯編寫」，為玩家提供深度的策略思考空間。

### 核心要點回顧

1. **快照機制**：每個卡槽維護一個當前屬性快照，順序依賴卡修改快照，衍生卡複製快照
2. **順序依賴**：卡片放入的先後順序決定最終效果，創造策略深度
3. **全局效果（金卡）**：不受順序影響，作用於所有現有和未來的實例
4. **卡槽系統**：三個卡槽分別只能放一種技能類型的卡片，但可以堆疊無限張
5. **卡片開啟機制**：任何卡片都可以是初始卡片，第一張卡片開啟該技能類型
6. **參數設計**：每個技能類型有明確的可用和不可用參數，避免設計混淆

---

**版本**：v2.0  
**最後更新**：2024  
**適用專案**：Survivor-X

